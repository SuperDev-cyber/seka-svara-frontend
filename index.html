<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <link rel="icon" type="image/svg+xml" href="/vite.svg" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <script>
      (function () {
        try {
          var MOBILE_REDIRECT_PATH = '/mobile/';
          var DISABLE_KEY = 'seka-force-desktop';
          
          // Skip if already on mobile path
          if (window.location.pathname.startsWith(MOBILE_REDIRECT_PATH)) {
            return;
          }
          
          // Skip if user explicitly disabled mobile redirect
          if (window.localStorage && window.localStorage.getItem(DISABLE_KEY) === 'true') {
            return;
          }
          
          // Enhanced mobile detection
          var ua = (navigator.userAgent || navigator.vendor || window.opera || '').toLowerCase();
          
          // Check for mobile user agents (including emulators)
          var mobilePatterns = [
            /android/i,
            /iphone/i,
            /ipod/i,
            /ipad/i,
            /iemobile/i,
            /wpdesktop/i,
            /opera mini/i,
            /mobile/i,
            /tablet/i,
            /mumuplayer/i,  // MUMUPLAYER emulator
            /bluestacks/i,  // BlueStacks emulator
            /nox/i,        // Nox emulator
            /ldplayer/i,    // LDPlayer emulator
            /memu/i,       // MEmu emulator
            /genymotion/i, // Genymotion emulator
            /android emulator/i,
            /mobile safari/i
          ];
          
          var isMobileUA = mobilePatterns.some(function(pattern) {
            return pattern.test(ua);
          });
          
          // Check viewport width (more reliable than user agent)
          var viewportWidth = Math.max(
            document.documentElement ? document.documentElement.clientWidth : 0,
            window.innerWidth || 0,
            screen.width || 0
          );
          
          // Check screen dimensions (helps catch emulators)
          var screenWidth = screen.width || 0;
          var screenHeight = screen.height || 0;
          var isSmallScreen = (screenWidth > 0 && screenWidth <= 1024) || 
                              (screenHeight > 0 && screenHeight <= 768);
          
          // Check touch capability
          var hasTouchScreen = 'ontouchstart' in window || 
                               navigator.maxTouchPoints > 0 || 
                               navigator.msMaxTouchPoints > 0;
          
          // Mobile if: mobile UA OR small viewport OR small screen OR (touch + small viewport)
          var prefersMobileViewport = viewportWidth > 0 && viewportWidth <= 1024;
          var isMobile = isMobileUA || prefersMobileViewport || 
                        (isSmallScreen && hasTouchScreen) ||
                        (hasTouchScreen && viewportWidth <= 1024);
          
          if (isMobile) {
            var search = window.location.search || '';
            var hash = window.location.hash || '';
            var targetUrl = window.location.origin + MOBILE_REDIRECT_PATH + search + hash;
            window.location.replace(targetUrl);
          }
        } catch (err) {
          console.error('Mobile redirect detection failed:', err);
        }
      })();
    </script>
    <title>Seka Svara</title>
  </head>
  <body>
    <div id="root"></div>
    <script type="module" src="/src/main.jsx"></script>
  </body>
</html>
